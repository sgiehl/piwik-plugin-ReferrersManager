(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):"function"===typeof define&&define.amd?define(["CoreHome",,"CorePluginsAdmin"],t):"object"===typeof exports?exports["ReferrersManager"]=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):e["ReferrersManager"]=t(e["CoreHome"],e["Vue"],e["CorePluginsAdmin"])})("undefined"!==typeof self?self:this,(function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="plugins/ReferrersManager/vue/dist/",n(n.s="fae3")}({"19dc":function(t,n){t.exports=e},"8bbf":function(e,n){e.exports=t},a5a2:function(e,t){e.exports=n},fae3:function(e,t,n){"use strict";if(n.r(t),n.d(t,"ManagePage",(function(){return Ke})),n.d(t,"ManageSearchEngines",(function(){return de})),n.d(t,"ManageSocials",(function(){return Ue})),n.d(t,"URLChecker",(function(){return M})),"undefined"!==typeof window){var r=window.document.currentScript,a=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);a&&(n.p=a[1])}var c=n("8bbf"),o={class:"row",ref:"tabs"},l={class:"tabs"},i={class:"tab col s6"},s={href:"#searchengineTab",class:"active"},d={class:"tab col s6"},u={href:"#socialTab"},b={id:"searchengineTab",class:"col s12"},m={id:"socialTab",class:"col s12"},j={class:"ui-confirm",id:"removeDataConfirm"},f=["innerHTML"],g=["value"],O=["value"];function h(e,t,n,r,a,h){var p=Object(c["resolveComponent"])("URLChecker"),E=Object(c["resolveComponent"])("ContentBlock"),S=Object(c["resolveComponent"])("ManageSearchEngines"),N=Object(c["resolveComponent"])("ManageSocials");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(E,{"content-title":e.title},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(p)]})),_:1},8,["content-title"]),Object(c["createVNode"])(E,{id:"referrersmanage"},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",o,[Object(c["createElementVNode"])("ul",l,[Object(c["createElementVNode"])("li",i,[Object(c["createElementVNode"])("a",s,Object(c["toDisplayString"])(e.translate("ReferrersManager_ManageSearchEngines")),1)]),Object(c["createElementVNode"])("li",d,[Object(c["createElementVNode"])("a",u,Object(c["toDisplayString"])(e.translate("ReferrersManager_ManageSocials")),1)])]),Object(c["createElementVNode"])("div",b,[Object(c["createVNode"])(S)]),Object(c["createElementVNode"])("div",m,[Object(c["createVNode"])(N,{"own-social-definitions":e.ownSocialDefinitions},null,8,["own-social-definitions"])])],512),Object(c["createElementVNode"])("div",j,[Object(c["createElementVNode"])("h2",{innerHTML:e.translate("ReferrersManager_ConfirmRemove","<span class='name'></span>")},null,8,f),Object(c["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,g),Object(c["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_Cancel")},null,8,O)])]})),_:1})],64)}var p=n("19dc"),E={class:"url-checker"},S={class:"detectionresult"},N=["src"],y=["textContent"],V=["innerHTML"],v={class:"socialresult"},D=["src"],k=["textContent"];function w(e,t,n,r,a,o){var l=Object(c["resolveComponent"])("SaveButton");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("h3",null,Object(c["toDisplayString"])(e.translate("ReferrersManager_CheckUrl")),1),Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("ReferrersManager_CheckUrlDesc")),1),Object(c["createElementVNode"])("div",E,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",size:"50","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.urlToCheck=t}),onChange:t[1]||(t[1]=function(t){return e.clearResult()})},null,544),[[c["vModelText"],e.urlToCheck]]),Object(c["createVNode"])(l,{onConfirm:t[2]||(t[2]=function(t){return e.checkResult()}),class:"checkurlbutton",value:e.translate("ReferrersManager_CheckUrlSend")},null,8,["value"]),Object(c["createElementVNode"])("p",S,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("ReferrersManager_DetectedEngine"))+": ",1),Object(c["createElementVNode"])("img",{src:e.detectedEngineImg,height:"16"},null,8,N),Object(c["createElementVNode"])("span",{class:"engine",textContent:Object(c["toDisplayString"])(e.detectedEngine)},null,8,y),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("ReferrersManager_DetectedKeywords"))+": ",1),Object(c["createElementVNode"])("span",{class:"keywords",innerHTML:e.$sanitize(e.detectedKeyword)},null,8,V)]),Object(c["createElementVNode"])("p",v,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("ReferrersManager_DetectedSocial"))+": ",1),Object(c["createElementVNode"])("img",{src:e.detectedSocialImg,height:"16"},null,8,D),Object(c["createElementVNode"])("span",{class:"social",textContent:Object(c["toDisplayString"])(e.detectedSocial)},null,8,k)])])],64)}var C=n("a5a2"),x=Object(c["defineComponent"])({data:function(){return{urlToCheck:"",detectedEngineImg:"",detectedEngine:"",detectedKeyword:"",detectedSocialImg:"",detectedSocial:""}},components:{SaveButton:C["SaveButton"]},created:function(){this.clearResult()},methods:{clearResult:function(){this.detectedEngine="",this.detectedKeyword="",this.detectedEngineImg="plugins/Morpheus/icons/dist/searchEngines/xx.png",this.detectedSocial="",this.detectedSocialImg="plugins/Morpheus/icons/dist/socials/xx.png"},checkResult:function(){var e=this;/^https?:\/\//.test(this.urlToCheck)||(this.urlToCheck="https://".concat(this.urlToCheck)),p["AjaxHelper"].fetch({module:"ReferrersManager",action:"checkUrl",url:this.urlToCheck},{withTokenInUrl:!0}).then((function(t){t.searchengine&&t.searchengine.name?(e.detectedEngine=t.searchengine.name,e.detectedKeyword=t.searchengine.keywords,e.detectedEngineImg=t.searchengine.image):(e.detectedEngine="",e.detectedKeyword="",e.detectedEngineImg="plugins/Morpheus/icons/dist/searchEngines/xx.png"),t.social&&t.social.name?(e.detectedSocial=t.social.name,e.detectedSocialImg=t.social.image):(e.detectedSocial="",e.detectedSocialImg="plugins/Morpheus/icons/dist/socials/xx.png")}))}}});x.render=w;var M=x,B=Object(c["createElementVNode"])("span",{class:"icon-add"},null,-1),T=Object(c["createElementVNode"])("span",{class:"icon-reload"},null,-1),R={class:"search-detections"},_=["placeholder"],A={key:0},L={key:0},H={rowspan:"6"},P={class:"loadingPiwik"},I=Object(c["createElementVNode"])("img",{src:"plugins/Morpheus/images/loading-blue.gif",alt:"{{ translate('General_LoadingData') }}"},null,-1),F=["rowspan"],U=["src"],G=["title"],$=["title"],q=["title"],K={key:1},z=["onClick"],W=Object(c["createElementVNode"])("span",{class:"icon-delete"},null,-1),Y={for:"engineName"},J={for:"engineHost"},Q={for:"engineParameter"},X={for:"engineBacklink"},Z={for:"engineCharset"};function ee(e,t,n,r,a,o){var l=Object(c["resolveComponent"])("SaveButton"),i=Object(c["resolveDirective"])("content-table");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("h3",null,Object(c["toDisplayString"])(e.translate("ReferrersManager_SearchEnginesList")),1),Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("ReferrersManager_HostnameWildcardDesc")),1),Object(c["createElementVNode"])("span",{class:"add-element",onClick:t[0]||(t[0]=function(t){return e.showAddSearchEngineForm(!0)})},[B,Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("ReferrersManager_AddSearchEngine")),1)]),Object(c["createElementVNode"])("span",{class:"refresh-list",onClick:t[1]||(t[1]=function(t){return e.refreshList()})},[T,Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("General_Refresh")),1)]),Object(c["createElementVNode"])("div",R,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.searchText=t}),value:"",placeholder:e.translate("General_Search")},null,8,_),[[c["vModelText"],e.searchText]])]),Object(c["withDirectives"])(Object(c["createElementVNode"])("table",null,[Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("General_Name")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("ReferrersManager_Hostname")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("ReferrersManager_Parameters")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("ReferrersManager_BacklinkPattern")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("ReferrersManager_Charset")),1),e.userDefinedSearchEngines?(Object(c["openBlock"])(),Object(c["createElementBlock"])("th",A)):Object(c["createCommentVNode"])("",!0)])]),Object(c["createElementVNode"])("tbody",null,[e.busy?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",L,[Object(c["createElementVNode"])("th",H,[Object(c["createElementVNode"])("div",P,[I,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("General_LoadingData")),1)])])])):Object(c["createCommentVNode"])("",!0),e.busy?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],{key:1},Object(c["renderList"])(e.searchEngineNames.filter((function(t){return t.toLowerCase().includes(e.searchText.toLowerCase())})),(function(t){return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:t},[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.searchEngines[t],(function(n,r){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:r},[0===r?(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",{key:0,rowspan:e.searchEngines[t].length},[Object(c["withDirectives"])(Object(c["createElementVNode"])("img",{src:e.searchEngineLogos[t],width:"16",height:"16"},null,8,U),[[c["vShow"],e.searchEngineLogos[t]]]),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(t),1)],8,F)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("td",{title:n.url},Object(c["toDisplayString"])(e.truncateText(n.url,40)),9,G),Object(c["createElementVNode"])("td",{title:n.parameters},Object(c["toDisplayString"])(e.truncateText(n.parameters,30)),9,$),Object(c["createElementVNode"])("td",{title:n.backlink},Object(c["toDisplayString"])(e.truncateText(n.backlink,30)),9,q),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(n.charset),1),e.userDefinedSearchEngines?(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",K,[e.userDefinedSearchEngines[n.url]?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{key:0,class:"delete-element",onClick:function(t){return e.removeEngine(n.url)}},[W,Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("General_Delete")),1)],8,z)):Object(c["createCommentVNode"])("",!0)])):Object(c["createCommentVNode"])("",!0)])})),128))],64)})),128))])],512),[[i]])],512),[[c["vShow"],!e.showEngineForm]]),Object(c["withDirectives"])(Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("h3",null,Object(c["toDisplayString"])(e.translate("ReferrersManager_AddSearchEngine")),1),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("ReferrersManager_ProvideEngineData"))+" ",1),Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("ReferrersManager_DuplicateHostnameInfo")),1),Object(c["createElementVNode"])("table",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("label",Y,Object(c["toDisplayString"])(e.translate("General_Name"))+"*:",1)]),Object(c["createElementVNode"])("td",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.newEngineData["name"]=t}),id:"engineName"},null,512),[[c["vModelText"],e.newEngineData["name"]]])])]),Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("label",J,Object(c["toDisplayString"])(e.translate("ReferrersManager_Hostname"))+"*:",1)]),Object(c["createElementVNode"])("td",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.newEngineData["host"]=t}),id:"engineHost"},null,512),[[c["vModelText"],e.newEngineData["host"]]])])]),Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("label",Q,Object(c["toDisplayString"])(e.translate("ReferrersManager_Parameters"))+" "+Object(c["toDisplayString"])(e.translate("ReferrersManager_CommaSeparated"))+":",1)]),Object(c["createElementVNode"])("td",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.newEngineData["parameters"]=t}),id:"engineParameter"},null,512),[[c["vModelText"],e.newEngineData["parameters"]]])])]),Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("label",X,Object(c["toDisplayString"])(e.translate("ReferrersManager_BacklinkPattern"))+":",1)]),Object(c["createElementVNode"])("td",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.newEngineData["backlink"]=t}),id:"engineBacklink"},null,512),[[c["vModelText"],e.newEngineData["backlink"]]])])]),Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("label",Z,Object(c["toDisplayString"])(e.translate("ReferrersManager_Charset"))+":",1)]),Object(c["createElementVNode"])("td",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.newEngineData["charset"]=t}),id:"engineCharset"},null,512),[[c["vModelText"],e.newEngineData["charset"]]])])])]),Object(c["createVNode"])(l,{onConfirm:t[8]||(t[8]=function(t){return e.addSearchEngine()})}),Object(c["createVNode"])(l,{onConfirm:t[9]||(t[9]=function(t){return e.showAddSearchEngineForm(!1)}),value:e.translate("General_Cancel")},null,8,["value"])],512),[[c["vShow"],e.showEngineForm]])],64)}function te(e,t){return oe(e)||ce(e,t)||re(e,t)||ne()}function ne(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function re(e,t){if(e){if("string"===typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ce(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0)if(c.push(r.value),t&&c.length===t)break}catch(i){l=!0,a=i}finally{try{o||null==n["return"]||n["return"]()}finally{if(l)throw a}}return c}}function oe(e){if(Array.isArray(e))return e}var le=window,ie=le.$,se=Object(c["defineComponent"])({data:function(){return{searchEngines:{},searchEngineNames:[],userDefinedSearchEngines:{},searchEngineLogos:{},newEngineData:{},busy:!1,showEngineForm:!1,searchText:""}},created:function(){this.fetchSearchEngines()},directives:{ContentTable:p["ContentTable"]},components:{SaveButton:C["SaveButton"]},methods:{refreshList:function(){var e=this;p["AjaxHelper"].post({module:"ReferrersManager",action:"refresh",type:"searchengines"},{},{withTokenInUrl:!0}).then((function(){e.fetchSearchEngines()}))},fetchSearchEngines:function(){var e=this;if(!this.busy){this.busy=!0;var t=[];t.push(p["AjaxHelper"].fetch({module:"API",method:"ReferrersManager.getSearchEngineDefinitions"})),t.push(p["AjaxHelper"].fetch({module:"API",method:"ReferrersManager.getSearchEngineLogos"})),t.push(p["AjaxHelper"].fetch({module:"API",method:"ReferrersManager.getUserDefinedSearchEngines"})),Promise.all(t).then((function(t){var n=te(t,3),r=n[0],a=n[1],c=n[2];e.searchEngines=r,e.searchEngineNames=Object.keys(r),e.searchEngineLogos=a,e.userDefinedSearchEngines=c,e.busy=!1}))}},showAddSearchEngineForm:function(e){this.showEngineForm=e},removeEngine:function(e){var t=this;ie("#removeDataConfirm").find("h2 .name").text(e),p["Matomo"].helper.modalConfirm("#removeDataConfirm",{yes:function(){p["AjaxHelper"].fetch({module:"API",method:"ReferrersManager.removeSearchEngine",host:e}).then((function(){t.refreshList()}))}})},addSearchEngine:function(){var e=this;p["AjaxHelper"].post({module:"API",method:"ReferrersManager.addSearchEngine"},this.newEngineData).then((function(t){t?(e.showAddSearchEngineForm(!1),e.newEngineData={name:"",host:"",parameters:"",backlink:"",charset:""},e.refreshList()):e.showAddEngineError()}))},truncateText:function(e,t){return e&&e.length>t?"".concat(e.substr(0,t-3),"..."):e},showAddEngineError:function(){p["NotificationsStore"].show({message:Object(p["translate"])("ReferrersManager_AddEngineError"),context:"error",noclear:!0,type:"toast",style:{display:"inline-block"},id:"addEngineError"})}}});se.render=ee;var de=se,ue={class:"notification system notification-warning"},be=Object(c["createTextVNode"])(),me={class:"notification system notification-success"},je=Object(c["createTextVNode"])(),fe=Object(c["createElementVNode"])("span",{class:"icon-add"},null,-1),ge=Object(c["createElementVNode"])("span",{class:"icon-reload"},null,-1),Oe={class:"search-detections"},he=["placeholder"],pe={key:0},Ee={key:0},Se={rowspan:"6"},Ne={class:"loadingPiwik"},ye=["alt"],Ve=["rowspan"],ve=["src"],De={key:1},ke=["onClick"],we=Object(c["createElementVNode"])("span",{class:"icon-delete"},null,-1),Ce={key:0},xe={for:"socialName"},Me={for:"socialHost"};function Be(e,t,n,r,a,o){var l=Object(c["resolveComponent"])("SaveButton"),i=Object(c["resolveDirective"])("content-table");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("h3",null,Object(c["toDisplayString"])(e.translate("ReferrersManager_SocialsList")),1),Object(c["withDirectives"])(Object(c["createElementVNode"])("p",ue,[Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(e.translate("ReferrersManager_SocialListDisabled")),1),be,Object(c["createElementVNode"])("a",{href:"javascript:;",id:"enablesocials",onClick:t[0]||(t[0]=function(t){return e.setDefaultSocialsDisabled(!1)})},Object(c["toDisplayString"])(e.translate("ReferrersManager_EnableSocialList")),1)],512),[[c["vShow"],e.usesOwnSocialDefinitions]]),Object(c["withDirectives"])(Object(c["createElementVNode"])("p",me,[Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(e.translate("ReferrersManager_UsingDefaultSocials")),1),je,Object(c["createElementVNode"])("a",{href:"javascript:;",id:"disablesocials",onClick:t[1]||(t[1]=function(t){return e.setDefaultSocialsDisabled(!0)})},Object(c["toDisplayString"])(e.translate("ReferrersManager_DisableSocialList")),1)],512),[[c["vShow"],!e.usesOwnSocialDefinitions]]),Object(c["createElementVNode"])("span",{class:"add-element",onClick:t[2]||(t[2]=function(t){return e.showAddSocialForm(!0)})},[fe,Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("ReferrersManager_AddSocial")),1)]),Object(c["createElementVNode"])("span",{class:"refresh-list",onClick:t[3]||(t[3]=function(t){return e.refreshList()})},[ge,Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("General_Refresh")),1)]),Object(c["createElementVNode"])("div",Oe,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.searchText=t}),value:"",placeholder:e.translate("General_Search")},null,8,he),[[c["vModelText"],e.searchText]])]),Object(c["withDirectives"])(Object(c["createElementVNode"])("table",null,[Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("General_Name")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("ReferrersManager_Hostname")),1),e.userDefinedSocials?(Object(c["openBlock"])(),Object(c["createElementBlock"])("th",pe)):Object(c["createCommentVNode"])("",!0)])]),Object(c["createElementVNode"])("tbody",null,[e.busy?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",Ee,[Object(c["createElementVNode"])("th",Se,[Object(c["createElementVNode"])("div",Ne,[Object(c["createElementVNode"])("img",{src:"plugins/Morpheus/images/loading-blue.gif",alt:e.translate("General_LoadingData")},null,8,ye),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("General_LoadingData")),1)])])])):Object(c["createCommentVNode"])("",!0),e.busy?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],{key:1},Object(c["renderList"])(e.socialNames.filter((function(t){return t.toLowerCase().includes(e.searchText.toLowerCase())})),(function(t){return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:t},[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.socials[t],(function(n,r){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:r},[0===r?(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",{key:0,rowspan:e.socials[t].length},[e.socialLogos[t]?(Object(c["openBlock"])(),Object(c["createElementBlock"])("img",{key:0,src:e.socialLogos[t],width:"16",height:"16"},null,8,ve)):Object(c["createCommentVNode"])("",!0),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(t),1)],8,Ve)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(n),1),e.userDefinedSocials?(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",De,[e.userDefinedSocials[n]?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{key:0,class:"delete-element",onClick:function(t){return e.removeSocial(n)}},[we,Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("General_Delete")),1)],8,ke)):Object(c["createCommentVNode"])("",!0)])):Object(c["createCommentVNode"])("",!0)])})),128))],64)})),128))])],512),[[i]])],512),[[c["vShow"],!e.showSocialForm]]),e.showSocialForm?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Ce,[Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("ReferrersManager_AddSocial")),1),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("ReferrersManager_ProvideSocialData"))+" ",1),Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("ReferrersManager_DuplicateHostnameInfo")),1),Object(c["createElementVNode"])("table",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("label",xe,Object(c["toDisplayString"])(e.translate("General_Name"))+"*:",1)]),Object(c["createElementVNode"])("td",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.newSocialData["name"]=t}),id:"socialName"},null,512),[[c["vModelText"],e.newSocialData["name"]]])])]),Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("label",Me,Object(c["toDisplayString"])(e.translate("ReferrersManager_Hostname"))+"*:",1)]),Object(c["createElementVNode"])("td",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.newSocialData["host"]=t}),id:"socialHost"},null,512),[[c["vModelText"],e.newSocialData["host"]]])])])]),Object(c["createVNode"])(l,{onConfirm:t[7]||(t[7]=function(t){return e.addSocial()})}),Object(c["createVNode"])(l,{onConfirm:t[8]||(t[8]=function(t){return e.showAddSocialForm(!1)}),value:e.translate("General_Cancel")},null,8,["value"])])):Object(c["createCommentVNode"])("",!0)],64)}function Te(e,t){return He(e)||Le(e,t)||_e(e,t)||Re()}function Re(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _e(e,t){if(e){if("string"===typeof e)return Ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ae(e,t):void 0}}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Le(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0)if(c.push(r.value),t&&c.length===t)break}catch(i){l=!0,a=i}finally{try{o||null==n["return"]||n["return"]()}finally{if(l)throw a}}return c}}function He(e){if(Array.isArray(e))return e}var Pe=window,Ie=Pe.$,Fe=Object(c["defineComponent"])({props:{ownSocialDefinitions:Boolean},data:function(){return{socials:{},socialNames:[],userDefinedSocials:{},socialLogos:{},newSocialData:{},busy:!1,showSocialForm:!1,searchText:"",usesOwnSocialDefinitions:this.ownSocialDefinitions}},created:function(){this.fetchSocials()},directives:{ContentTable:p["ContentTable"]},components:{SaveButton:C["SaveButton"]},methods:{refreshList:function(){var e=this;p["AjaxHelper"].post({module:"ReferrersManager",action:"refresh",type:"socials"},{},{withTokenInUrl:!0}).then((function(){e.fetchSocials()}))},fetchSocials:function(){var e=this;if(!this.busy){this.busy=!0;var t=[];t.push(p["AjaxHelper"].fetch({module:"API",method:"ReferrersManager.getSocialDefinitions"})),t.push(p["AjaxHelper"].fetch({module:"API",method:"ReferrersManager.getSocialLogos"})),t.push(p["AjaxHelper"].fetch({module:"API",method:"ReferrersManager.getUserDefinedSocials"})),Promise.all(t).then((function(t){var n=Te(t,3),r=n[0],a=n[1],c=n[2];e.socials=r,e.socialNames=Object.keys(r),e.socialLogos=a,e.userDefinedSocials=c,e.busy=!1}))}},showAddSocialForm:function(e){this.showSocialForm=e},removeSocial:function(e){var t=this;Ie("#removeDataConfirm").find("h2 .name").text(e),p["Matomo"].helper.modalConfirm("#removeDataConfirm",{yes:function(){p["AjaxHelper"].fetch({module:"API",method:"ReferrersManager.removeSocial",host:e}).then((function(){t.refreshList()}))}})},addSocial:function(){var e=this;p["AjaxHelper"].post({module:"API",method:"ReferrersManager.addSocial"},this.newSocialData).then((function(t){t?(e.showAddSocialForm(!1),e.newSocialData={name:"",host:""},e.refreshList()):e.showAddEngineError()}))},setDefaultSocialsDisabled:function(e){var t=this;p["AjaxHelper"].fetch({module:"API",method:"ReferrersManager.setDefaultSocialsDisabled",state:e},this.newSocialData).then((function(){t.fetchSocials(),t.usesOwnSocialDefinitions=e}))},truncateText:function(e,t){return e&&e.length>t?"".concat(e.substr(0,t-3),"..."):e},showAddEngineError:function(){p["NotificationsStore"].show({message:Object(p["translate"])("ReferrersManager_AddSocialError"),context:"error",noclear:!0,type:"toast",style:{display:"inline-block"},id:"addEngineError"})}}});Fe.render=Be;var Ue=Fe,Ge=window,$e=Ge.$,qe=Object(c["defineComponent"])({props:{title:String,ownSocialDefinitions:Boolean},mounted:function(){var e=this.$refs.tabs;$e(".tabs",e).tabs()},components:{ContentBlock:p["ContentBlock"],URLChecker:M,ManageSearchEngines:de,ManageSocials:Ue}});qe.render=h;var Ke=qe;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */}})}));
//# sourceMappingURL=ReferrersManager.umd.min.js.map